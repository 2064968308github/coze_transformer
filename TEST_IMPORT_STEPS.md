# 工作流导入功能测试步骤

## 🎯 测试目标
验证工作流导入功能是否在资源库中正常工作

## 📋 测试前准备
1. 确保后端服务正在运行 (`http://localhost:8888`)
2. 确保前端服务正在运行 (通常是 `http://localhost:3000`)
3. 准备测试文件：项目根目录下的 `test_workflow_import.json`

## 🔍 测试步骤

### 步骤1：访问资源库
1. 打开浏览器，访问前端应用
2. 导航到工作空间的资源库页面
3. URL格式：`http://localhost:3000/space/{space_id}/library`

### 步骤2：查找导入选项
1. 在资源库页面，找到右上角的 **"+ 资源"** 按钮
2. 点击该按钮，应该看到一个下拉菜单
3. 验证菜单中包含以下选项：
   - ✅ "工作流" (创建新工作流)
   - ✅ "对话流" (如果不是开源版本)
   - ✅ **"导入工作流"** (新增的导入选项)

### 步骤3：测试导入功能
1. 点击 **"导入工作流"** 选项
2. 应该弹出一个导入对话框，包含：
   - 文件上传区域
   - "点击上传"按钮
   - 支持格式说明 (JSON格式，最大10MB)

### 步骤4：上传测试文件
1. 点击 **"点击上传"** 按钮
2. 选择 `test_workflow_import.json` 文件
3. 验证以下内容：
   - ✅ 文件被成功选择
   - ✅ 显示工作流预览信息
   - ✅ 自动填充工作流名称为"测试工作流"

### 步骤5：完成导入
1. (可选) 修改工作流名称
2. 点击 **"导入"** 按钮
3. 验证以下结果：
   - ✅ 显示导入成功消息
   - ✅ 对话框关闭
   - ✅ 资源库列表刷新
   - ✅ 新工作流出现在列表中

## 🐛 故障排除

### 如果看不到"导入工作流"选项：
1. 清除浏览器缓存并刷新页面
2. 检查浏览器控制台是否有JavaScript错误
3. 确认前端代码已经重新编译

### 如果导入失败：
1. 检查后端服务是否正常运行
2. 查看浏览器开发者工具的Network标签
3. 确认 `/api/workflow_api/import` 请求状态
4. 检查文件格式是否正确

### 如果上传文件时出错：
1. 确认文件是有效的JSON格式
2. 确认文件大小不超过10MB
3. 检查文件内容是否包含必要的字段

## ✅ 成功标准
- [ ] 能在资源库中看到"导入工作流"选项
- [ ] 能成功上传JSON文件
- [ ] 能正确预览工作流信息
- [ ] 能成功导入工作流
- [ ] 新工作流出现在资源库列表中
- [ ] 没有JavaScript错误或网络错误

## 📞 如需帮助
如果测试过程中遇到问题，请提供：
1. 浏览器控制台的错误信息
2. Network标签中的请求详情
3. 具体的错误步骤描述

祝测试顺利！🚀